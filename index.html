<html>
<head>
  <title>LiMuT</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="UTF-8">
  <style>
    body {
      font-family: helvetica, arial;
    }
    .widget {
      background: #f8f8f8;
      border: 2px solid #202020;
      border-radius: 6px;
      margin: 4px;
      padding: 4px
    }
    button {
      font-size: 2em;
    }
    span {
      font-weight: bold;
    }
    .info {
      width: 100%;
      max-width: 100%;
    }
    pre {
      width: 100%;
      max-width: 100%;
      overflow-x: auto;
    }
  </style>
</head>
<body>
  <div class="widget">
    <h1>Global</h1>
    <p>MainAmp: <span id="main-amp-readout"></span> <input id="main-amp-slider" type="range" min="0" max="200" oninput="mainAmpChange(parseFloat(this.value)/100)" style="width:80%;" /></p>
    <p>bpm: <span id="bpm-readout"></span> MainReverb: <span id="main-reverb-readout"></span></p>
  </div>
  <div class="widget">
    <p>
      <button onclick="go()">▶</button>
      <button onclick="stop()">◼</button>
    </p>
    <p>
      <textarea id="code" rows="20" style="width: 100%; max-width: 100%; font-size:1.2em;"></textarea>
    </p>
  </div>
<div class="info">
Examples:
<pre>d1 play x-o-, dur=1/2</pre>
<pre>b1 dbass 0246, dur=2, attack=0, decay=3, sus=1</pre>
<pre>Mainreverb = 10
Ba dbass 004[21], dur=4, amp=1.5
Kd play x[.x]x., dur=2
Sn play .o, dur=2</pre>
<pre>bpm = 140
d1 play x
d2 play [..--]</pre>
</div>
<div class="info">
<pre>b1 dbass 0021, detune=(0.1,0.2,0.3,0.5)</pre>
<pre>b1 dbass 0204, sus=1/4, dur=1/2, echo=3/4</pre>
<pre>p1 dsaw 0534, add=(0,2,4), dur=4</pre>
<pre>vars.ch = [0,2,-2,3]t8
p1 dbass 0-100, dur=1, chop=[2,2.5,3]t1, add=vars.ch, echo=(1/17,1/23)
k play X, lpf=800
s play .*
hh play -, echo=1/4, amp=2
arp ping 04794697, dur=1/4, echo=3/8, add=vars.ch, lpf=[10000,1000]t[24,8]
main dsaw 0, dur=8, add=vars.ch, detune=(0,0.1,0.3), chop=[0,2,3]t32, amp=0.5
</pre>
<pre>Perc play lstig, dur=[1,3,2], amp=0.2, echo=1/8
Amb ping 0[21]., dur=4, release=8, detune=[(0,0.3,0.7,1.3),(0,0.5,0.9,1.4)]t4
Bass dbass 0, dur=8, attack=2, release=4, lpf=[300,1000,3000,1000]t8
</pre
<h3>predefined vars</h3>
<p><code>vars.bpm</code> Beats per minute</p>
<p><code>vars.mainamp</code> Main mix amplitude control</p>
<p><code>vars.mainreverb</code> Main reverb amplitude control</p>
<h3>Synths</h3>
<p><code>! / stop / none</code> </p>
<p><code>play</code> Play samples. Use letters, symbols and digits 1-4 in the pattern to choose the sample</p>
<p><code>drums</code> Basic drum synth; accepts XxOo-= characters in the pattern</p>
<p><code>dsaw</code> </p>
<p><code>dbass</code> </p>
<p><code>ping</code> </p>
<h3>Pattern syntax</h3>
<p><code>x-o-</code> Sequence of events, each of duration <code>dur</code>, for use with <code>play</code></p>
<p><code>x.</code> Use a dot for a rest</p>
<p><code>0123</code> Sequence of events, each of duration <code>dur</code>, for use with tonal synths. Numbers are scale degrees</p>
<p><code>0-1-2-3</code> Negative scale degrees allow tones below the synth root pitch</p>
<p><code>0[123]</code> Square brackets to fit multiple events into one <code>dur</code> (triplet shown)</p>
<h3>params</h3>
<p><code>amp</code> Player amplitude control</p>
<p><code>oct</code> Octave</p>
<p><code>attack</code> Attack time in beats</p>
<p><code>decay</code> Decay time in beats</p>
<p><code>sus</code> Sustain time in beats</p>
<p><code>suslevel</code> Sustain amplitude control</p>
<p><code>release</code> Release time in beats</p>
<p><code>dur</code> Event time in beats</p>
<p><code>delay</code> Event start time offset in beats</p>
<p><code>echo</code> Echo time delay in beats</p>
<p><code>detune</code> Amount of detune in semitones</p>
<p><code>add</code> Amount to add onto event scale degree, in degrees</p>
<p><code>lpf</code> Low pass filter frequency</p>
<p><code>lpr</code> Low pass filter resonance</p>
<p><code>hpf</code> High pass filter frequency</p>
<p><code>hpr</code> High pass filter resonance</p>
<p><code>chop</code> Chop the signal into a number of parts per beat</p>
<h3>Param syntax</h3>
<p><code>1</code> Single value</p>
<p><code>(1,2)</code> Multiple values, all played together</p>
<p><code>[1,2]</code> Sequence of values, one per event in the pattern</p>
<p><code>[1,2]T3</code> Timed sequence, each value lasts for 3 beats</p>
<p><code>[1,2]T[12,4]</code> Timed sequence with one timing per value</p>
</div>
</body>
<script data-main="main" src="require.js">
/*
x More samples - add all foxdot samples and sample param
x github won't serve from underscore?
+ operator: add values together
 do a proper parse to fix next UT
% operator: mod values into range
^ operator: concat arrays
* operator: repeat arrays, multiply numbers
/ operator: repeat arrays, divide numbers
- operator: repeat arrays, subtract numbers
Strict mode for all code
? when evaluating time var, can it accept a decimal time? Do we pass event time rather than beat time?
round brackets for chords in patterns
random timevar gens for params: {9} {0..9} {0.1..9} {0,1,3,4}
<> for 'in sequence on each repeat' in patterns
linear and 's' time vars
random timevar gens for patterns: {o-:}
swell synth
allow dur to be tvar
?consider rewrite separating concerns of parsing, sequencing, and evaluation. ALl values are functions until the end
?extract some of the playing stuff out of pattern.js?
fix delay param problems (commented tests in pattern.js)
pattern char to extend duration of previous note (cf. to '.' for rest)
<> for 'in sequence on each repeat' in params
vib param
room/mix params - cheap shared delay based
shape param?
formant param?
Sample param
soprano synth - use vib effect
rate param for play
curly brackets for patterns - variations
pattern generators: random, tri, Dur etc
Syntax to make parts of patterns repeat a set number of times?
?? Should param pattern repeat be independent of main pattern repeat? Eg so you can xo, amp=[1,2,3] and it multiplies out
Preload samples immediately after parsing
evaluate predefined vars; eg allow bpm=[80,120]
index pattern by beat to improve performance in finding events - same for timeVar evaluation
aaah synth: https://github.com/AppGeo/web-audio-examples/blob/master/formant.html
*/
</script>
</html>
